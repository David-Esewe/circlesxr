<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts/>

    <!-- add your custom scripts here -->
    <!-- <script src="/worlds/hub/scripts/hub.js"></script> -->
    <script src="components/look-at.js"></script>
    <script src="components/easy-transparency.js"></script>
  </head>
  <body>

    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui/>

    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties>
      <a-assets>
        <!-- add your assets here -->
        <img id="skyMap" src="assets/images/Gradient.jpg" crossorigin="anonymous">

        <!-- loading navmesh. Following instructions from here: https://github.com/n5ro/aframe-extras/tree/master/src/pathfinding -->
        <a-asset-item id="navmesh_gltf" src="assets/models/navmesh.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>

        <!-- Images -->
        <img id="heart1_img" src="assets/images/island_2/heart_1.png" crossorigin="anonymous">
        <img id="woman_img" src="assets/images/island_2/Woman.png" crossorigin="anonymous">
        <img id="cerberus_img" src="assets/images/island_2/Cerberus.png" crossorigin="anonymous">

        <!-- Multiple island assets -->
        <a-asset-item id="pedestal-gltf" src="assets/models/general/Pedestal.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>

        <!-- Islands -->
        <a-asset-item id="island_1_gltf" src="assets/models/island_1/island_1_new.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="island_2_gltf" src="assets/models/island_2/island_2_new.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="island_3_gltf" src="assets/models/island_3/island_3_new.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>


        <!-- Island 1 props and assets -->
        <a-asset-item id="stem-gltf" src="assets/models/island_1/TreeStem.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="brainLarge-gltf" src="assets/models/island_1/BrainLarge.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="spinal-cord-gltf" src="assets/models/island_1/SpinalCord.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="ladder1-gltf" src="assets/models/island_1/Ladder1.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="road1-gltf" src="assets/models/island_1/Road1.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="Archway1-gltf" src="assets/models/island_1/Archway1.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="brain-gltf" src="assets/models/island_1/Brain/Brain.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>


        <!-- Island 2 props and assets -->
        <img id="heart1_img" src="assets/images/island_2/heart_1.png" crossorigin="anonymous">
        <img id="heart2_img" src="assets/images/island_2/heart_2.png" crossorigin="anonymous">
        <img id="heart3_img" src="assets/images/island_2/heart_3.png" crossorigin="anonymous">
        <img id="medusa_img" src="assets/images/island_2/medusa.png" crossorigin="anonymous">
        <a-asset-item id="telephonePole-gltf" src="assets/models/island_2/TelephonePole/TelephonePole.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="pillow-gltf" src="assets/models/island_2/Pillow_pons.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="white-pawn-gltf" src="assets/models/island_2/White_Pawn.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="black-pawn-gltf" src="assets/models/island_2/Black_Pawn.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="Island2Ladder-gltf" src="assets/models/island_2/Island2Ladder.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>

        <!-- Island 3 props and assets -->
        <a-asset-item id="platform-gltf" src="assets/models/island_3/Island3Platform.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="Island3Ladder1-gltf" src="assets/models/island_3/Island3Ladder1.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="Island3Archway-gltf" src="assets/models/island_3/Island3Archway.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="Island3Platform-gltf" src="assets/models/island_3/Island3Platform.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="Island3Path1-gltf" src="assets/models/island_3/Island3Path1.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>

        <!-- audio -->
        
        <!-- narration -->
        <audio id="Narr_brainstem-snd" src="assets/audio/brainstem-v02.WAV" preload="true"></audio>
        <audio id="Narr_cerebellum-snd" src="assets/audio/cerebellum-v01.WAV" preload="true"></audio>
        <audio id="Narr_medulla-snd" src="assets/audio/medulla-oblongata-v01.WAV" preload="true"></audio>
        <audio id="Narr_pons-snd" src="assets/audio/pons-v01.WAV" preload="true"></audio>

        <!-- Circles' built-in assets [REQUIRED] -->
        <circles-assets/>
      </a-assets>

      <!-- Circles' built-in manager and avatar [REQUIRED] -->
      <circles-manager-avatar/>

      <!-- ENVIRONMENT -->
      <a-entity id="env_group">
        <a-entity id="navmesh" gltf-model="#navmesh_gltf" nav-mesh visible="false"></a-entity>

        <!-- ISLAND 1 -->
        <a-entity id="island_1_group">
          <a-entity id="island_1" gltf-model="#island_1_gltf" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>

          <a-entity id="spine" position="-2.8 7.4 1.2" scale="0.5 0.5 0.5" rotation="0 -50 0" gltf-model="#spinal-cord-gltf" animation-mixer></a-entity>
          <a-entity id="stem" gltf-model="#stem-gltf"></a-entity>
          <a-entity id="brainLarge" gltf-model="#brainLarge-gltf"></a-entity>
          <a-entity id="road1" gltf-model="#road1-gltf"></a-entity>
          <a-entity id="archway1" gltf-model="#Archway1-gltf"></a-entity>
          <a-entity id="ladder-island1" gltf-model="#ladder1-gltf"></a-entity>

          <a-entity id="pedestal-island1-scene1" position="1.0 0 3.7" scale="0.2 0.2 0.2" rotation="0 30 0" gltf-model="#pedestal-gltf"></a-entity>


          <!-- Teleport to second island -->

          <!-- Pedestal / Button / Text label -->
          <a-entity id="pedestal1-island1" position="-5.1 -0.1 -9.4" scale="0.25 0.25 0.25" rotation="0 -50 0" gltf-model="#pedestal-gltf"></a-entity>
          <a-entity id="island_1_button_1" position="-5.1 1.35 -9.4" scale="0.8 0.8 0.8" rotation="0 -50 0" circles-button="pedastal_color:rgb(74, 87, 95);" circles-sendpoint="target:#island_2_checkpoint_11;"></a-entity>
          <a-entity text="value: To Hindbrain Island; align: center; color: white;" position="-5.1 1.7 -9.4" scale="4 4 1" look-at="#Player1"></a-entity>
          
          <a-entity text="value: Brainstem Island; align: center; color: white;" position="6.42 3.2 5.54" scale="4 4 1" look-at="#Player1"></a-entity>

          <!-- Island 1 checkpoints
          <a-entity id="island_1_checkpoint_1" position="7.9 0.0 7.9" circles-checkpoint circles-spawnpoint></a-entity> -->
          <a-entity id="island_1_checkpoint_2" circles-checkpoint position="0.34 0.13 -0.25"></a-entity>
          <a-entity id="island_1_checkpoint_3" circles-checkpoint position="-5.233 0.182 -5.920"></a-entity>

        </a-entity>

        <!-- ISLAND 2 -->
        <a-entity id="island_2_group">
          <a-entity id="island_2" gltf-model="#island_2_gltf" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>

          <!-- Scene 1: Cerebellum-->
          <a-entity id="TelephonePole" position="-17.114 7.310 -18.878" rotation="0 90 0" gltf-model="#telephonePole-gltf" circles-sphere-env-map="src:#skyMap"></a-entity>
          <a-image id="woman" position="-19.443 15.864 -19.304" scale="3 3 3" src="#woman_img" look-at="#Player1"></a-image>
          <a-image id="cerberus" position="-10.865 14.314 -27.283" scale="19 16 16" rotation="25 -100 0" src="#cerberus_img" look-at="#Player1"></a-image>
          <a-entity id="pedestal-island2-scene1" position="-17.231 7.4 -15.219" scale="0.2 0.2 0.2" rotation="0 20 0" gltf-model="#pedestal-gltf"></a-entity>

          <!-- Scene 2: Medulla Oblongata -->
          <a-image id="heart1" position="-44.217 9.193 -17.230" scale="3 3 3" src="#heart1_img" easy-transparency look-at="#Player1"></a-image>
          <a-image id="heart2" position="-44.088 9.193 -19.397" scale="3 3 3" src="#heart2_img" easy-transparency look-at="#Player1"></a-image>
          <a-image id="heart3" position="-44.170 9.2 -21.326" scale="3 3 3" src="#heart3_img" easy-transparency look-at="#Player1"></a-image>
          <a-image id="medusa" position="-45.252 12.7 -19.101" scale="10 10 10" src="#medusa_img" easy-transparency look-at="#Player1"></a-image>
          <a-entity id="pedestal-island2-scene2" position="-40.664 7.5 -22.597" scale="0.2 0.2 0.2" gltf-model="#pedestal-gltf"></a-entity>

          
          <!-- Scene 3: Pons -->
          <a-entity id="pillow" position="-17.071 8.214 -44.379" rotation="-1.7 -63.070 -60" scale="0.2 0.2 0.2" gltf-model="#pillow-gltf"></a-entity>
          <a-entity id="black-pawn-1" position="-15.804 7.4 -49.1049" scale="1.2 1.2 1.2" gltf-model="#black-pawn-gltf"></a-entity>
          <a-entity id="black-pawn-2" position="-20.367 7.4 -46.989" scale="1 1 1" gltf-model="#black-pawn-gltf"></a-entity>
          <a-entity id="white-pawn" position="-18.578 7.4 -49.947" scale="0.8 0.8 0.8" gltf-model="#white-pawn-gltf"></a-entity>
          
          <a-entity id="pedestal-island2-scene3" position="-14.667 7.4 -40.626" scale="0.2 0.2 0.2" gltf-model="#pedestal-gltf"></a-entity>

          <!-- Teleport to island 1-->
          <!-- Pedestal / Button / Text label -->
          <a-entity id="pedestal1-island2" position="-10.25 7.01 -10.8" scale="0.25 0.25 0.25" rotation="0 -70 0" gltf-model="#pedestal-gltf"></a-entity>
          <a-entity id="island_2_button_1" position="-10.25 8.51 -10.8" scale="0.8 0.8 0.8" rotation="0 -70 0" circles-button="pedastal_color:rgb(74, 87, 95);" circles-sendpoint="target:#island_1_checkpoint_3;"></a-entity>
          <a-entity text="value: To Brainstem Island; align: center; color: white;" position="-10.25 8.8 -10.8" scale="4 4 1" look-at="#Player1"></a-entity>

          <!-- Teleport to island 3 -->
          <!-- Pedestal / Button / Text label -->
          <a-entity id="pedestal2-island2" position="-5.559 6.923 -47.081" scale="0.25 0.25 0.25" gltf-model="#pedestal-gltf"></a-entity>
          <a-entity id="island_2_button_2" position="-5.559 8.423 -47.081" scale="0.8 0.8 0.8" circles-button="pedastal_color:rgb(74, 87, 95);" circles-sendpoint="target:;"></a-entity>
          <a-entity text="value: To Midbrain Island; align: center; color: white;" position="-5.559 8.723 -47.081" scale="4 4 1" look-at="#Player1"></a-entity>

          <a-entity id="Island2Ladder" gltf-model="#Island2Ladder-gltf"></a-entity>

          <a-entity text="value: Hindbrain Island; align: center; color: white;" position="-10.3 10.4 -14.0" scale="4 4 1" look-at="#Player1"></a-entity>

          <!-- Checkpoints -->
          <a-entity id="island_2_checkpoint_1" circles-checkpoint position="-8.384 7.217 -11.099"></a-entity>
          <a-entity id="island_2_checkpoint_2" circles-checkpoint position="-14.646 7.537 -14.004"></a-entity>
          <a-entity id="island_2_checkpoint_3" circles-checkpoint position="-24.325 7.537 -10.012"></a-entity>
          <a-entity id="island_2_checkpoint_4" circles-checkpoint position="-33.637 7.645 -12.782"></a-entity>
          <a-entity id="island_2_checkpoint_5" circles-checkpoint position="-38.292 7.724 -21.255"></a-entity>
          <a-entity id="island_2_checkpoint_6" circles-checkpoint position="-38.705 7.690 -30.769"></a-entity>
          <a-entity id="island_2_checkpoint_7" circles-checkpoint position="-36.956 7.590 -40.841"></a-entity>
          <a-entity id="island_2_checkpoint_8" circles-checkpoint position="-32.056 7.469 -48.977"></a-entity>
          <a-entity id="island_2_checkpoint_9" circles-checkpoint position="-23.879 7.605 -44.067"></a-entity>
          <a-entity id="island_2_checkpoint_10" circles-checkpoint position="-15.488 7.636 -38.109"></a-entity>
          <a-entity id="island_2_checkpoint_11" circles-checkpoint position="-7.867 7.443 -46.361"></a-entity>

        </a-entity>

        <!-- ISLAND 3 -->
        <a-entity id="island_3_group">
          <a-entity id="island_3" gltf-model="#island_3_gltf" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>
          <a-entity id="platform" gltf-model="#platform-gltf" circles-sphere-env-map="src:#skyMap"></a-entity>
          <a-entity id="Island3Ladder1-gltf" gltf-model="#Island3Ladder1-gltf" circles-sphere-env-map="src:#skyMap"></a-entity>
          <a-entity id="Island3Archway-gltf" gltf-model="#Island3Archway-gltf" circles-sphere-env-map="src:#skyMap"></a-entity>
          <a-entity id="Island3Path1-gltf" gltf-model="#Island3Path1-gltf" circles-sphere-env-map="src:#skyMap"></a-entity>

          <a-entity text="value: Midbrain Island; align: center; color: white;" position="-5.049 24.892 -54.066" scale="4 4 1" look-at="#Player1"></a-entity>

          <!-- Island 3 checkpoints -->
          <a-entity id="island_3_checkpoint_1" position="-5.839 21.969 -51.469" circles-checkpoint circles-spawnpoint></a-entity>
          <a-entity id="island_3_checkpoint_2" circles-checkpoint position="1.556 22.227 -55.435"></a-entity>
          <a-entity id="island_3_checkpoint_2" circles-checkpoint position="7.910 22.424 -53.220"></a-entity>
          <a-entity id="island_3_checkpoint_2" circles-checkpoint position="13.450 22.353 -54.823"></a-entity>
          <a-entity id="island_3_checkpoint_2" circles-checkpoint position="15.448 24.190 -58.096" rotation="37.980 -33.590 0"></a-entity>
          <a-entity id="island_3_checkpoint_2" circles-checkpoint position="18.020 24.714 -63.295"></a-entity>
          <a-entity id="island_3_checkpoint_2" circles-checkpoint position="20.560 24.714 -69.270"></a-entity>
          <a-entity id="island_3_checkpoint_2" circles-checkpoint position="21.380 24.714 -75.634"></a-entity>
          <a-entity id="island_3_checkpoint_2" circles-checkpoint position="15.327 24.714 -76.797"></a-entity>
          <a-entity id="island_3_checkpoint_2" circles-checkpoint position="11.551 24.714 -71.397"></a-entity>
          <a-entity id="island_3_checkpoint_2" circles-checkpoint position="7.168 24.714 -69.406"></a-entity>
        </a-entity>



        <!-- ISLAND 4 -->
        <!-- <a-entity id="island_4_group" position="9 10 -30" rotation="0 -25 0">
          <a-entity id="island_4_placeholder" scale="2.4 2.4 2.4" gltf-model="#island_placeholder_gltf" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>
        </a-entity> -->

        <!-- ISLAND 5 -->
        <!-- <a-entity id="island_5_group" position="23 27 -52" rotation="0 115 0">
          <a-entity id="island_5_placeholder" scale="2.7 2.7 2.7" gltf-model="#island_placeholder_gltf" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>
        </a-entity> -->

        <!-- ISLAND 6 -->
        <!-- <a-entity id="island_6_group" position="-6.6 26 -70" rotation="0 80 0">
          <a-entity id="island_6_placeholder" scale="2.7 2.7 2.7" gltf-model="#island_placeholder_gltf" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>
        </a-entity> -->

      </a-entity>

      <!-- Artefacts representing the different scenes. These are out of their respective scene entities as they can not have a parent entity that modifies their position. -->
      <!-- Island 1 Scene 1 -->
      <a-entity id="Artefact-BrainStem"
      position="1.0 1.2 3.7" rotation="0 0 0" scale="1 1 1"
      gltf-model="#brain-gltf"
      circles-sphere-env-map="src:#skyMap"
      circles-artefact="inspectScale:1 1 1; textRotationY:90.0; textLookAt:true; inspectRotation:0.0 0.0 0; inspectOffsetY:0;
                        label_offset:0.0 0.7 0.0; label_visible:true; arrow_position:down;
                        title:The Brainstem;
                        description:Located at the base of the brain, the brain stem regulates certain involuntary actions of the body, including heartbeat and breathing.;
                        label_text:Brain Stem; audio:#Narr_brainstem-snd; volume:0.4;"></a-entity> 

      <!-- Island 2 Scene 1 -->
      <a-entity id="Artefact-Cerebellum"
      position="-17.231 8.6 -15.219" rotation="0 0 0" scale="1 1 1"
      gltf-model="#brain-gltf"
      circles-sphere-env-map="src:#skyMap"
      circles-artefact="inspectScale:1 1 1; textRotationY:90.0; textLookAt:true; inspectRotation:0.0 0.0 0; inspectOffsetY:0;
                        label_offset:0.0 0.7 0.0; label_visible:true; arrow_position:down;
                        title:The Cerebellum;
                        description:This part of the brain is responsible for coordinating voluntary movements. It is also responsible for a number of functions including motor skills such as balance, coordination, and posture.;
                        label_text:Cerebellum; audio:#Narr_cerebellum-snd; volume:0.4;" ></a-entity>

      <!-- Island 2 Scene 2 -->
      <a-entity id="Artefact-Medulla-Oblongata"
      position="-40.664 8.7 -22.597" rotation="0 90 0" scale="1 1 1"
      gltf-model="#brain-gltf"
      circles-sphere-env-map="src:#skyMap"
      circles-artefact="inspectScale:1 1 1; textRotationY:90.0; textLookAt:true; inspectRotation:0.0 0.0 0; inspectOffsetY:0;
                        label_offset:0.0 0.7 0.0; label_visible:true; arrow_position:down;
                        title:The Medulla Oblongata;
                        description:The medulla oblongata is responsible for regulating several basic functions of the autonomic nervous system, including respiration, cardiac function, vasodilation, and reflexes like vomiting, coughing, sneezing, and swallowing.;
                        label_text:Medulla Oblongata; audio:#Narr_medulla-snd; volume:0.4;"></a-entity>

      <!-- Island 2 Scene 3 -->
      <a-entity id="Artefact-Pons"
      position="-14.667 8.6 -40.626" rotation="0 90 0" scale="1 1 1"
      gltf-model="#brain-gltf"
      circles-sphere-env-map="src:#skyMap"
      circles-artefact="inspectScale:1 1 1; textRotationY:90.0; textLookAt:true; inspectRotation:0.0 0.0 0; inspectOffsetY:0;
                        label_offset:0.0 0.7 0.0; label_visible:true; arrow_position:down;
                        title:The Pons;
                        description:Pons is very important part of brain for the regulation and control of a number of vital functions.;
                        label_text:Pons; audio:#Narr_pons-snd; volume:0.4;"></a-entity>

      <!-- sky and lights -->
      <a-entity id="lighting_group">
        <a-entity id="sunlight" position="0 20 0" rotation="40 0 0"
                  light="type:directional; intensity:4; color:#d5e4f5; castShadow:false;"></a-entity>
        <a-entity light="type:hemisphere; color:#FFFFFF; groundColor:#BCE2F4; intensity:3.0"></a-entity>

        <a-entity id="skyBox"
                  rotation="0 200 0"
                  scale="100 100 100"
                  geometry="primitive:sphere; radius:50; segments-height:24; segments-width:24;"
                  material="shader:flat; src:#skyMap; side:back;">
        </a-entity>
      </a-entity>
    </a-scene>

    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts/>
  </body>
</html>
